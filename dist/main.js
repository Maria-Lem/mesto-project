(()=>{"use strict";function e(e){e.classList.add("popup_opened")}function t(e){e.classList.remove("popup_opened")}var n=document.querySelector("#cardBlockTemplate").content,r=document.querySelector(".popup_type_card"),o=document.querySelector(".popup__image"),c=document.querySelector(".popup__caption");function u(t,u){var a=n.cloneNode(!0),i=a.querySelector(".card__title"),d=a.querySelector(".card__image");return i.textContent=t,d.src=u,d.alt=t,a.querySelector(".button_type_like").addEventListener("click",(function(e){return e.target.classList.toggle("button_active")})),a.querySelector(".button_type_delete").addEventListener("click",(function(e){e.target.closest(".card").remove()})),d.addEventListener("click",(function(){o.src=u,o.alt=t,c.textContent=t,e(r)})),a}var a=document.querySelector(".popup_type_edit"),i=document.querySelector(".popup_type_add"),d=document.querySelectorAll(".popup"),s=document.querySelectorAll(".container"),l=document.querySelector(".button_type_edit"),p=document.querySelector(".button_type_add"),m=document.querySelectorAll(".button_type_close"),_=(document.querySelectorAll(".button_type_like"),document.querySelectorAll(".button_type_delete"),document.forms.editProfilePopup),f=document.forms.addCardPopup,y=_.elements.userName,v=_.elements.userOccupation,k=f.elements.photoName,q=f.elements.photoLink,S=document.querySelector(".profile__name"),L=document.querySelector(".profile__occupation"),E=document.querySelector(".cards");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){E.append(u(e.name,e.link))}));var b=function(e){document.addEventListener("keydown",(function n(r){"Escape"===r.key&&t(e),document.removeEventListener("keydown",n)}))};l.addEventListener("click",(function(){y.value=S.textContent,v.value=L.textContent,e(a),b(a)})),p.addEventListener("click",(function(){e(i),b(i)})),s.forEach((function(e){return e.addEventListener("click",(function(e){return e.stopPropagation()}))})),d.forEach((function(e){return e.addEventListener("click",(function(e){return t(e.target.closest(".popup"))}))})),m.forEach((function(e){return e.addEventListener("click",(function(e){return t(e.target.closest(".popup"))}))})),_.addEventListener("submit",(function(){var e,n;e=y.value,n=v.value,S.textContent=e,L.textContent=n,t(a)})),f.addEventListener("submit",(function(){E.prepend(u(k.value,q.value)),t(i),f.reset()}));var h=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove("form__submit_disabled"):t.classList.add("form__submit_disabled")};Array.from(document.querySelectorAll(".form")).forEach((function(e){var t=Array.from(e.querySelectorAll(".form__input")),n=e.querySelector(".form__submit");e.addEventListener("submit",(function(e){e.preventDefault(),h(t,n)})),function(e){var t=Array.from(e.querySelectorAll(".form__input")),n=e.querySelector(".form__submit");h(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),r.textContent=n,r.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(e,r),h(t,n)}))}))}(e)}))})();